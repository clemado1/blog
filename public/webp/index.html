<!DOCTYPE html>
<html lang="en">
    <head>
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge" >
        <meta http-equiv="content-type" content="text/html; charset=utf-8">

        <!-- SEO -->
        
        <title> Webp 이미지 이용 |  </title>
        

        <!-- Enable responsiveness on mobile devices-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" >

        <!-- js -->
        <script src="gallant-goldwasser-cea001.netlify.app/theme_selector.js"></script>
        <script src="https://kit.fontawesome.com/e307e34624.js" crossorigin="anonymous"></script>

        <!--  css -->
        <link id="themeCSS" rel="stylesheet"
                            href="gallant-goldwasser-cea001.netlify.app/default.css"
                            />

        <!-- fonts -->
        <!-- preload  -->
        <link rel="preload" href="https://fonts.googleapis.com/css?family=Montserrat:200,300,300i,400,500,500i,600,700,800,900|Raleway" as="style">
        <!-- load -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:200,300,300i,400,500,500i,600,700,800,900|Raleway">
        
    </head>

    <body onload="main();">
      
<input type="checkbox" id="openSidebarMenu" class="openSidebarMenu">
<label class="menu cross menu--1" for="openSidebarMenu">
    <svg viewBox="0 0 75 75" xmlns="https://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="30" />
        <path class="line--1" d="M0 40h62c13 0 6 28-4 18L35 35" />
        <path class="line--2" d="M0 50h70" />
        <path class="line--3" d="M0 60h62c13 0 6-28-4-18L35 65" />
    </svg>
</label>

<div id="sidebarMenu">
    <div class="menu_wrapper">
        <ul class="sidebarMenuInner">
            <li>
                <a href="gallant-goldwasser-cea001.netlify.app" ></a>
                <div class="menu_div" ></div>
            </li>
            
            



<li >
    <a href="https:&#x2F;&#x2F;github.com&#x2F;clemado1" target="_blank">clemado1</a>
    <i class="fab fa-github"></i>
</li>



<li >
    <a href="https:&#x2F;&#x2F;twitter.com&#x2F;clemado1" target="_blank">@clemado1</a>
    <i class="fab fa-twitter"></i>
</li>



<li >
    <a href="mailto:clemado1@gmail.com" target="_blank">contact</a>
    <i class="fas fa-envelope"></i>
</li>



<li >
    <a href="https:&#x2F;&#x2F;instagram.com&#x2F;clemdis" target="_blank">clemdis</a>
    <i class="fab fa-instagram"></i>
</li>





        </ul>
    </div>
</div>



      
<nav id="overlord" class="overlord" >
  
  
<figure class="mini_logo ">
    <a href="gallant-goldwasser-cea001.netlify.app" style="background-image: url(/img/profile.png)"></a>
</figure>
<h5>
    <a href="gallant-goldwasser-cea001.netlify.app"></a>
</h5>

  



</nav>

<section class="post_container">
  <article>
    
      <h1 class="article_title"><a href="gallant-goldwasser-cea001.netlify.app&#x2F;webp&#x2F;" id="article_link">Webp 이미지 이용</a></h1>
      
<ul class="frontmatter frontmatter_page" id="frontmatter">
    <li>
        <time class="article_time" datetime="2020-07-09">July 09, 2020</time>
    </li>
    <span class="dotDivider"></span>
    <li> 341 words </li>
    <span class="dotDivider" ></span>
    <li> 2 min </li>
</ul>

      <h3 id="pagespeed-insights">PageSpeed Insights</h3>
<p>구글에서 만든 <code>PageSpeed Insights</code>를 활용하면 사이트의 속도와 성능을 리뷰할 수 있다.<br />
이 중 우리 사이트의 개선점으로 나온 <em>차세대 형식을 사용해 이미지 제공하기</em>를 적용해보고자 한다.</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>https://developers.google.com/speed/pagespeed/insights/?hl=ko&amp;url={url}
</span></code></pre>
<h3 id="casedda-imiji-pomaes">차세대 이미지 포맷</h3>
<p>차세대 이미지 포맷은 트래픽과 로딩 속도 감소를 위해 대체 기술로 이미지를 압축하는 방식을 말한다. 차세대로 거론되는 이미지 포맷은 아래 3가지가 있는데, 이 중 Google에서 개발한 Webp의 지원율이 현재 약 80%로 가장 높다.</p>
<ul>
<li><a href="https://caniuse.com/#feat=webp">Webp</a></li>
<li><a href="https://caniuse.com/#feat=jpeg2000">JPEG 2000</a></li>
<li><a href="https://caniuse.com/#feat=jpegxr">JPEG XR</a></li>
</ul>
<h3 id="webp-sseoci-for-linux-ubuntu">Webp 설치 for Linux (Ubuntu)</h3>
<p>회사에서 사용하는 <code>WSL2 Ubuntu16.04</code>에서 설치를 진행했다.</p>
<blockquote>
<p><a href="https://developers.google.com/speed/webp/docs/compiling#building">공식 설치 가이드</a></p>
</blockquote>
<h5 id="paekiji">패키지</h5>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> apt-get install libjpeg-dev libpng-dev libtiff-dev libgif-dev
</span></code></pre>
<h5 id="bbidde">빌드</h5>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">wget</span><span> https://storage.googleapis.com/downloads.webmproject.org/releases/webp/libwebp-{version}.tar.gz
</span><span style="color:#96b5b4;">cd</span><span> libwebp-{version}
</span><span style="color:#bf616a;">./configure
</span><span style="color:#bf616a;">make
</span><span style="color:#bf616a;">sudo</span><span> make install
</span></code></pre>
<h5 id="hwanggyeonbbyeosu">환경변수</h5>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b48ead;">export </span><span style="color:#bf616a;">LD_LIBRARY_PATH</span><span>=$</span><span style="color:#bf616a;">LD_LIBRARY_PATH</span><span style="color:#a3be8c;">:/usr/local/lib
</span><span style="color:#96b5b4;">echo </span><span>$</span><span style="color:#bf616a;">LD_LIBRARY_PATH
</span><span style="color:#96b5b4;">echo </span><span>&quot;</span><span style="color:#a3be8c;">export LD_LIBRARY_PATH=</span><span>$</span><span style="color:#bf616a;">LD_LIBRARY_PATH</span><span style="color:#a3be8c;">:/usr/local/lib</span><span>&quot; &gt;&gt; </span><span style="color:#bf616a;">~</span><span>/.bashrc
</span></code></pre>
<h5 id="sseoci-hwagin">설치 확인</h5>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span> </span><span style="color:#bf616a;">clemado1@PC</span><span>  cwebp
</span><span style="color:#bf616a;">Usage:
</span><span>
</span><span>   </span><span style="color:#bf616a;">cwebp </span><span style="color:#b48ead;">[</span><span>options</span><span style="color:#b48ead;">]</span><span style="color:#bf616a;"> -q</span><span> quality input.png</span><span style="color:#bf616a;"> -o</span><span> output.webp
</span><span>
</span><span style="color:#bf616a;">where</span><span> quality is between 0 (poor) </span><span style="color:#bf616a;">to</span><span> 100 (very good)</span><span style="color:#96b5b4;">.
</span><span style="color:#bf616a;">Typical</span><span> value is around 80.
</span><span>
</span><span style="color:#bf616a;">Try -longhelp</span><span> for an exhaustive list of advanced options.
</span></code></pre>
<h3 id="webp-ssihaeng">Webp 실행</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">cwebp -q</span><span> 80 bg_main_01.jpg</span><span style="color:#bf616a;"> -o</span><span> test.webp
</span><span>
</span></code></pre>
<p><code>jpg</code> 포맷의 이미지를 <code>-q</code> 압축 계수 80으로 지정하고 실행했을 때 1.06MB -&gt; 174KB 의 결과를 얻었다.<br />
압축 계수를 낮게 지정할 수록 파일 크기는 줄어드나 품질도 낮아진다.</p>
<blockquote>
<p><a href="https://developers.google.com/speed/webp/docs/cwebp">Webp 옵션 상세</a></p>
</blockquote>
<h3 id="webp-imiji-sahyon">Webp 이미지 사용</h3>
<p>다른 이미지와 동일하게 <code>&lt;img&gt;</code> 태그로도 가능하지만, 일부 브라우저 혹은 ios 유저에게는 보이지 않는 경우가 발생한다.</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">img </span><span style="color:#d08770;">src</span><span>=&quot;</span><span style="color:#a3be8c;">/test.webp</span><span>&quot; </span><span style="color:#d08770;">alt</span><span>=&quot;</span><span style="color:#a3be8c;">Webp Test</span><span>&quot; /&gt;
</span></code></pre>
<p><code>webp</code> 를 지원하지 않는 접근일 때에는 원래 이미지를 보여주기 위해 <code>&lt;picture&gt;</code> 태그를 활용할 수 있다.<br />
<code>&lt;picture&gt;</code> 는 다중 이미지 리소스를 위한 태그로, 브라우저는 <code>&lt;source&gt;</code>를 순차 조회하며 현재 뷰포트에 알맞는 리소스를 선택한다.<br />
마지막에는 <code>&lt;img&gt;</code> 태그를 작성한다. 익스플로러 등 <code>&lt;picture&gt;</code> 태그를 지원하지 않는 브라우저거나, 알맞는 리소스가 없을 경우 사용된다.</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">picture</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">source </span><span style="color:#d08770;">srcset</span><span>=&quot;</span><span style="color:#a3be8c;">test.webp</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">image/webp</span><span>&quot; /&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">source </span><span style="color:#d08770;">srcset</span><span>=&quot;</span><span style="color:#a3be8c;">bg_main_01.jpg</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">image/jpeg</span><span>&quot; /&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">img </span><span style="color:#d08770;">src</span><span>=&quot;</span><span style="color:#a3be8c;">bg_main_01.jpg</span><span>&quot; </span><span style="color:#d08770;">alt</span><span>=&quot;</span><span style="color:#a3be8c;">Webp Test</span><span>&quot; /&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">picture</span><span>&gt;
</span></code></pre>

      
  </article>
</section>


       

      <footer>
        
          
          
<figure class="mini_logo ">
    <a href="gallant-goldwasser-cea001.netlify.app" style="background-image: url(/img/profile.png)"></a>
</figure>
<h5>
    <a href="gallant-goldwasser-cea001.netlify.app"></a>
</h5>

          
<ul class="social_list foot_list">
    



<li class="button extra_small font_faint">
    <a href="https:&#x2F;&#x2F;github.com&#x2F;clemado1" target="_blank">clemado1</a>
    <i class="fab fa-github"></i>
</li>



<li class="button extra_small font_faint">
    <a href="https:&#x2F;&#x2F;twitter.com&#x2F;clemado1" target="_blank">@clemado1</a>
    <i class="fab fa-twitter"></i>
</li>



<li class="button extra_small font_faint">
    <a href="mailto:clemado1@gmail.com" target="_blank">contact</a>
    <i class="fas fa-envelope"></i>
</li>



<li class="button extra_small font_faint">
    <a href="https:&#x2F;&#x2F;instagram.com&#x2F;clemdis" target="_blank">clemdis</a>
    <i class="fab fa-instagram"></i>
</li>





</ul>

          
<select id="theme_selector" size=1>
    <option value="default" selected>default</option>
    
    <option value="my-awesome-theme">my-awesome-theme</option>
    
</select>

        
      </footer>
    </body>
</html>
